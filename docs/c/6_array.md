---
title: 陣列
sidebar_position: 6
---

串列可以想像成一排置物櫃，每個格子都有一個編號，並且可以存放不同的資料。  
這些格子的編號從 `0` 開始，也就是第一個格子的編號是 `0`，第二個是 `1`，以此類推。

#### 為什麼需要陣列？

假設老師要紀錄班上 40 位學生的成績，並計算平均、最高、最低分數等。  
在不使用串列的情況下，必須創建 40 個變數來紀錄每位學生的成績。

```c
int a = 90;
int b = 85;
int c = 98;
int d = 76;
int e = 83;
...
```

但如果需要紀錄全校 2000 位學生的成績，創建 2000 個變數顯然不現實。這時候就可以使用陣列，只需要一個陣列變數，就能夠輕鬆管理大量數據。

```c
int scores[2000] = { 90, 85, 98, 76, 83, ... };
```

### 如何創建陣列

陣列使用類型名稱加上大括號 `{}` 來定義，裡面可以放置初始化的資料。

```c
char *fruits[] = {"橘子", "蘋果", "香蕉", "芭樂", "草莓"};
```

### 讀取陣列

陣列的每個元素可以通過編號（即索引）來讀取。注意，索引從 `0` 開始。

```c
#include <stdio.h>

int main() {
    char *fruits[] = {"橘子", "蘋果", "香蕉", "芭樂", "草莓"};
    printf("%s\n", fruits[0]);  // 橘子
    printf("%s\n", fruits[1]);  // 蘋果
    printf("%s\n", fruits[4]);  // 草莓
    // printf("%s\n", fruits[5]);  // 超出範圍，會引發錯誤
    return 0;
}
```

### 修改陣列

可以直接通過編號來修改陣列中的元素。

```c
#include <stdio.h>

int main() {
    char *fruits[] = {"橘子", "蘋果", "香蕉", "芭樂", "草莓"};
    fruits[2] = "芭樂";  // 修改元素
    printf("%s\n", fruits[2]); // 芭樂
    return 0;
}
```

### 新增資料

在 C 語言中，陣列的大小是固定的，因此不能直接新增資料。  
如果需要增加元素，可以創建一個新的更大的陣列，然後將原陣列的內容複製過去。

```c
#include <stdio.h>
#include <string.h>

int main() {
    char *fruits[7] = {"橘子", "蘋果", "香蕉", "芭樂", "草莓"};
    // 手動擴展陣列
    fruits[5] = "鳳梨";
    fruits[6] = "芒果";
    
    for (int i = 0; i < 7; i++) {
        printf("%s\n", fruits[i]);
    }
    return 0;
}
```

### 移除資料

在 C 語言中，陣列的大小是固定的，不能直接移除元素。  
可以用 `NULL` 來標示某個位置為空，或者使用新的陣列來重新組織資料。

```c
#include <stdio.h>

int main() {
    char *fruits[7] = {"橘子", "蘋果", "香蕉", "芭樂", "草莓", NULL, NULL};
    
    // 移除蘋果，將其設為 NULL
    fruits[1] = NULL;

    for (int i = 0; i < 7; i++) {
        if (fruits[i] != NULL) {
            printf("%s\n", fruits[i]);
        }
    }
    return 0;
}
```

### 計算陣列長度

C 語言中，陣列沒有內建的函數來計算長度，通常需要手動指定或使用 `sizeof` 來計算。

```c
#include <stdio.h>

int main() {
    char *fruits[] = {"橘子", "蘋果", "香蕉", "芭樂", "草莓"};
    int length = sizeof(fruits) / sizeof(fruits[0]);
    printf("%d\n", length);  // 5
    return 0;
}
```

### 挑戰題 - 找出最陡峭的山頂

給定一個整數串列 `terrain`，每個數字代表地形的高度。
請找出「最陡峭的山頂」的索引位置。山頂的定義如下：

- 高度比左右兩側的高度都高，即「山頂」
- 左右兩側的「斜度」之和最大
- 斜度的計算方式為山頂高度與左右兩側高- 度的絕對差之和，
即 (山頂高度 - 左側高度) + (山頂高度 - 右側高度)
- 串列最前和最後因為沒有左右兩邊都有相鄰資料，因此不列入判斷

```c
#include <stdio.h>
#include <stdlib.h>

int terrain[] = {
    91, 18, 69, 29, 15, 99, 74, 44, 13, 83, 
    65, 92, 97, 62, 17, 12, 16, 65, 82, 27, 
    29, 16, 54, 71, 30, 66, 70, 20, 86, 40
};

int main() {

}
```